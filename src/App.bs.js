// Generated by BUCKLESCRIPT VERSION 5.0.4, PLEASE EDIT WITH CARE
'use strict';

var Css = require("bs-css/src/Css.js");
var Curry = require("bs-platform/lib/js/curry.js");
var React = require("react");
var Belt_Array = require("bs-platform/lib/js/belt_Array.js");
var Caml_option = require("bs-platform/lib/js/caml_option.js");
var Belt_HashMapInt = require("bs-platform/lib/js/belt_HashMapInt.js");
var Item$ReactHooksTemplate = require("./components/Item/Item.bs.js");
var VirtualizedList$ReactHooksTemplate = require("./containers/VirtualizedList/VirtualizedList.bs.js");

function randomHeight(x) {
  return x * 150 + 200;
}

var data = Belt_Array.map(Belt_Array.range(1, 100), (function (id) {
        return /* record */[
                /* id */id,
                /* heightProp */randomHeight(Math.random()) | 0,
                /* sampleString */String(id)
              ];
      }));

function App$VList(Props) {
  var scrollPosition = Props.scrollPosition;
  var setScrollPosition = Props.setScrollPosition;
  var heightMap = Props.heightMap;
  var setHeightMap = Props.setHeightMap;
  var testRef = React.useRef(null);
  var match = React.useState((function () {
          return true;
        }));
  var setRefreshing = match[1];
  var match$1 = React.useState((function () {
          return false;
        }));
  var setLoading = match$1[1];
  React.useEffect((function () {
          setTimeout((function (param) {
                  return Curry._1(setRefreshing, (function (param) {
                                return false;
                              }));
                }), 1000);
          return undefined;
        }), /* array */[]);
  return React.createElement("div", {
              ref: testRef,
              className: Css.style(/* :: */[
                    Css.maxHeight(Css.vh(90)),
                    /* :: */[
                      Css.overflowY(/* scroll */-949692403),
                      /* [] */0
                    ]
                  ])
            }, React.createElement(VirtualizedList$ReactHooksTemplate.make, {
                  loading: match$1[0],
                  onEndReached: (function (param) {
                      return Curry._1(setLoading, (function (param) {
                                    return true;
                                  }));
                    }),
                  headerComponent: React.createElement("div", undefined, "Header comp"),
                  refreshingComponent: React.createElement("div", undefined, "..."),
                  refreshing: match[0],
                  defaultPosition: scrollPosition,
                  defaultHeightMap: Caml_option.some(heightMap),
                  onDestroy: (function (scrollPosition, heightMap) {
                      Curry._1(setScrollPosition, (function (param) {
                              return scrollPosition;
                            }));
                      return Curry._1(setHeightMap, (function (param) {
                                    return heightMap;
                                  }));
                    }),
                  data: data,
                  identity: (function (data) {
                      return data[/* id */0];
                    }),
                  viewPortRef: testRef,
                  renderItem: (function (data) {
                      return React.createElement(Item$ReactHooksTemplate.make, {
                                  id: data[/* id */0],
                                  heightProp: data[/* heightProp */1],
                                  key: String(data[/* id */0])
                                });
                    })
                }));
}

var VList = /* module */[/* make */App$VList];

function App$Header(Props) {
  var tempRoute = Props.tempRoute;
  var changeTempRoute = Props.changeTempRoute;
  if (tempRoute) {
    return React.createElement("div", undefined, React.createElement("button", {
                    onClick: (function (_e) {
                        return Curry._1(changeTempRoute, /* Home */0);
                      })
                  }, "To list"));
  } else {
    return React.createElement("div", undefined, React.createElement("button", {
                    onClick: (function (_e) {
                        return Curry._1(changeTempRoute, /* Other */1);
                      })
                  }, "To other route"));
  }
}

var Header = /* module */[/* make */App$Header];

function App(Props) {
  var match = React.useState((function () {
          return /* Home */0;
        }));
  var changeTempRoute = match[1];
  var tempRoute = match[0];
  var match$1 = React.useState((function () {
          return 0;
        }));
  var match$2 = React.useState((function () {
          return Belt_HashMapInt.make(1);
        }));
  return React.createElement(React.Fragment, {
              children: null
            }, React.createElement(App$Header, {
                  tempRoute: tempRoute,
                  changeTempRoute: (function (route) {
                      return Curry._1(changeTempRoute, (function (param) {
                                    return route;
                                  }));
                    })
                }), tempRoute ? React.createElement("div", undefined, "Other route!") : React.createElement(App$VList, {
                    scrollPosition: match$1[0],
                    setScrollPosition: match$1[1],
                    heightMap: match$2[0],
                    setHeightMap: match$2[1]
                  }));
}

var unit = /* () */0;

var make = App;

exports.unit = unit;
exports.randomHeight = randomHeight;
exports.data = data;
exports.VList = VList;
exports.Header = Header;
exports.make = make;
/* data Not a pure module */
